<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>👤 Participación en Capacitaciones - Hackless</title>
  <link rel="stylesheet" href="css/dark-theme.css">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* Tema oscuro moderno */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: 
        radial-gradient(circle at 20% 80%, rgba(59, 130, 246, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(16, 185, 129, 0.1) 0%, transparent 50%),
        linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
      color: #f1f5f9;
      line-height: 1.6;
      min-height: 100vh;
      background-attachment: fixed;
    }

    .header {
      background: rgba(15, 23, 42, 0.95);
      backdrop-filter: blur(25px);
      -webkit-backdrop-filter: blur(25px);
      padding: 20px 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid rgba(255, 255, 255, 0.15);
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    }

    .logo-area {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .logo-area img {
      width: 45px;
      height: 45px;
      border-radius: 8px;
      filter: brightness(1.1) contrast(1.1);
    }

    .logo-area span {
      font-size: 1.5em;
      font-weight: 600;
      background: linear-gradient(45deg, #60a5fa, #a78bfa);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
    }

    .back-btn {
      background: linear-gradient(45deg, rgba(59, 130, 246, 0.15), rgba(139, 92, 246, 0.15));
      border: 1px solid rgba(59, 130, 246, 0.4);
      color: #e2e8f0;
      padding: 12px 24px;
      border-radius: 10px;
      text-decoration: none;
      transition: all 0.3s ease;
      font-weight: 600;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 4px 15px rgba(59, 130, 246, 0.1);
    }

    .back-btn:hover {
      background: linear-gradient(45deg, rgba(59, 130, 246, 0.25), rgba(139, 92, 246, 0.25));
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(59, 130, 246, 0.25);
      border-color: rgba(59, 130, 246, 0.6);
    }

    .main-content {
      max-width: 1400px;
      margin: 0 auto;
      padding: 40px;
    }

    .welcome {
      text-align: center;
      margin-bottom: 40px;
      padding: 40px 20px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 20px;
      -webkit-backdrop-filter: blur(10px);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .welcome h1 {
      font-size: 2.5em;
      margin-bottom: 15px;
      background: linear-gradient(45deg, #60a5fa, #a78bfa, #34d399);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 0 30px rgba(96, 165, 250, 0.3);
    }

    .welcome p {
      color: #cbd5e1;
      font-size: 1.2em;
      max-width: 600px;
      margin: 0 auto;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }

    .stat-card {
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 15px;
      padding: 25px;
      text-align: center;
      -webkit-backdrop-filter: blur(10px);
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    .stat-card:hover {
      transform: translateY(-5px);
      border-color: #60a5fa;
      box-shadow: 0 8px 30px rgba(96, 165, 250, 0.2);
    }

    .stat-number {
      font-size: 2.5em;
      font-weight: bold;
      color: #60a5fa;
      margin-bottom: 10px;
      text-shadow: 0 0 15px rgba(96, 165, 250, 0.4);
    }

    .stat-label {
      color: #e2e8f0;
      font-size: 0.9em;
      font-weight: 500;
    }

    .filters-section {
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 30px;
      -webkit-backdrop-filter: blur(10px);
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    .filters-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      align-items: end;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .filter-label {
      font-size: 0.9em;
      color: #e2e8f0;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .filter-select,
    .filter-input {
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      padding: 12px;
      color: #f1f5f9;
      font-size: 1em;
      transition: all 0.3s ease;
    }

    .filter-select:focus,
    .filter-input:focus {
      outline: none;
      border-color: #60a5fa;
      box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.2);
      background: rgba(255, 255, 255, 0.12);
    }

    .filter-btn {
      background: linear-gradient(45deg, #3b82f6, #2563eb);
      border: none;
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .filter-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);
    }

    .table-container {
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 15px;
      overflow: hidden;
      -webkit-backdrop-filter: blur(10px);
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    .table {
      width: 100%;
      border-collapse: collapse;
    }

    .table th {
      background: rgba(96, 165, 250, 0.15);
      padding: 20px 15px;
      text-align: left;
      font-weight: 600;
      color: #60a5fa;
      border-bottom: 1px solid rgba(255, 255, 255, 0.15);
      text-shadow: 0 0 10px rgba(96, 165, 250, 0.3);
    }

    .table td {
      padding: 20px 15px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      transition: all 0.3s ease;
      color: #e2e8f0;
    }

    .table tr:hover {
      background: rgba(255, 255, 255, 0.08);
    }

    .status-badge {
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 0.85em;
      font-weight: 600;
      text-align: center;
      display: inline-block;
      min-width: 100px;
    }

    .status-completed {
      background: rgba(16, 185, 129, 0.2);
      color: #10b981;
      border: 1px solid #10b981;
    }

    .status-in-progress {
      background: rgba(59, 130, 246, 0.2);
      color: #3b82f6;
      border: 1px solid #3b82f6;
    }

    .status-pending {
      background: rgba(245, 158, 11, 0.2);
      color: #f59e0b;
      border: 1px solid #f59e0b;
    }

    .status-cancelled {
      background: rgba(239, 68, 68, 0.2);
      color: #ef4444;
      border: 1px solid #ef4444;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
      overflow: hidden;
      margin: 8px 0;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(45deg, #10b981, #059669);
      border-radius: 4px;
      transition: width 0.5s ease;
    }

    .progress-text {
      font-size: 0.8em;
      color: #94a3b8;
      text-align: center;
    }

    .action-btn {
      background: rgba(139, 92, 246, 0.2);
      border: 1px solid #8b5cf6;
      color: #c4b5fd;
      padding: 6px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.85em;
      transition: all 0.3s ease;
      margin: 0 3px;
    }

    .action-btn:hover {
      background: rgba(139, 92, 246, 0.3);
      transform: translateY(-1px);
    }

    .action-btn.certificate {
      background: rgba(16, 185, 129, 0.2);
      border-color: #10b981;
      color: #6ee7b7;
    }

    .action-btn.certificate:hover {
      background: rgba(16, 185, 129, 0.3);
    }

    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #64748b;
    }

    .empty-state .empty-icon {
      font-size: 4em;
      margin-bottom: 20px;
      opacity: 0.3;
    }

    .pagination {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin-top: 30px;
    }

    .pagination-btn {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: #e2e8f0;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .pagination-btn:hover:not(:disabled) {
      background: rgba(59, 130, 246, 0.2);
      border-color: #3b82f6;
    }

    .pagination-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .pagination-btn.active {
      background: #3b82f6;
      border-color: #3b82f6;
    }

    @media (max-width: 768px) {
      .main-content {
        padding: 20px 15px;
      }

      .filters-grid {
        grid-template-columns: 1fr;
      }

      .stats-grid {
        grid-template-columns: repeat(2, 1fr);
      }

      .table-container {
        overflow-x: auto;
      }

      .table {
        min-width: 800px;
      }
    }

    /* Animaciones */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .fade-in {
      animation: fadeInUp 0.6s ease-out;
    }

    /* Clases adicionales */
    .filter-title {
      margin-bottom: 20px;
      color: #60a5fa !important;
      font-weight: 600;
      text-shadow: 0 0 15px rgba(96, 165, 250, 0.4);
    }

    .navigation-section {
      text-align: center;
      margin-top: 40px;
    }

    .navigation-section .back-btn {
      margin: 0 10px;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <div class="header">
    <div class="logo-area">
      <img src="images/logoescudo.png" alt="🛡️ Hackless Logo">
      <span>👤 Participación en Capacitaciones</span>
    </div>
    <a href="escritorio.html" class="back-btn">← Volver al Dashboard</a>
  </div>

  <!-- Contenido principal -->
  <div class="main-content">
    <!-- Bienvenida -->
    <div class="welcome fade-in">
      <h1>👤 Mi Participación en Capacitaciones</h1>
      <p>Seguimiento personalizado de mis entrenamientos, progreso y certificaciones</p>
    </div>

    <!-- Estadísticas personales -->
    <div class="stats-grid fade-in">
      <div class="stat-card">
        <div class="stat-number" id="totalEnrollments">8</div>
        <div class="stat-label">Total Inscripciones</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="completedTrainings">5</div>
        <div class="stat-label">Completadas</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="inProgressTrainings">2</div>
        <div class="stat-label">En Progreso</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="certificatesEarned">5</div>
        <div class="stat-label">Certificados</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="totalHours">48h</div>
        <div class="stat-label">Horas Totales</div>
      </div>
    </div>

    <!-- Filtros -->
    <div class="filters-section fade-in">
      <h3 class="filter-title">🔍 Filtros de Búsqueda</h3>
      <div class="filters-grid">
        <div class="filter-group">
          <label class="filter-label">Estado</label>
          <select class="filter-select" id="statusFilter" title="Filtrar por estado de participación">
            <option value="all">Todos los estados</option>
            <option value="completed">Completado</option>
            <option value="in-progress">En Progreso</option>
            <option value="pending">Pendiente</option>
            <option value="cancelled">Cancelado</option>
          </select>
        </div>
        <div class="filter-group">
          <label class="filter-label">Capacitación</label>
          <input type="text" class="filter-input" id="trainingFilter" placeholder="Buscar por nombre...">
        </div>
        <div class="filter-group">
          <label class="filter-label">Fecha</label>
          <input type="date" class="filter-input" id="dateFilter" title="Filtrar por fecha de inscripción">
        </div>
        <div class="filter-group">
          <button class="filter-btn" onclick="applyFilters()">🔍 Buscar</button>
        </div>
      </div>
    </div>

    <!-- Tabla de participaciones -->
    <div class="table-container fade-in">
      <table class="table" id="participationsTable">
        <thead>
          <tr>
            <th>📚 Capacitación</th>
            <th>📅 Fecha Inscripción</th>
            <th>📊 Progreso</th>
            <th>🏆 Estado</th>
            <th>📄 Certificado</th>
            <th>⚙️ Acciones</th>
          </tr>
        </thead>
        <tbody>
          <!-- Datos se cargarán dinámicamente -->
        </tbody>
      </table>
    </div>

    <!-- Paginación -->
    <div class="pagination" id="pagination">
      <!-- Se generará dinámicamente -->
    </div>

    <!-- Enlaces de navegación -->
    <div class="navigation-section">
      <a href="capacitacion.html" class="back-btn">🎓 Ver Todas las Capacitaciones</a>
      <a href="escritorio.html" class="back-btn">🏠 Volver al Dashboard</a>
    </div>
  </div>

  <script>
    // Datos simulados de participaciones
    const participations = [
      {
        id: 1,
        training: "Seguridad Industrial",
        enrollDate: "2025-07-01",
        progress: 75,
        status: "in-progress",
        certificate: false,
        hours: 12,
        instructor: "Carlos Mendoza"
      },
      {
        id: 2,
        training: "Ciberseguridad",
        enrollDate: "2025-06-15",
        progress: 100,
        status: "completed",
        certificate: true,
        hours: 16,
        instructor: "Ana García"
      },
      {
        id: 3,
        training: "Gestión Ambiental",
        enrollDate: "2025-07-10",
        progress: 25,
        status: "in-progress",
        status: "pending",
        certificate: false,
        hours: 8,
        instructor: "María López"
      },
      {
        id: 4,
        training: "Primeros Auxilios",
        enrollDate: "2025-05-20",
        progress: 100,
        status: "completed",
        certificate: true,
        hours: 8,
        instructor: "Dr. Roberto Silva"
      },
      {
        id: 5,
        training: "Prevención de Riesgos",
        enrollDate: "2025-06-01",
        progress: 100,
        status: "completed",
        certificate: true,
        hours: 6,
        instructor: "Elena Ruiz"
      },
      {
        id: 6,
        training: "Manejo de Equipos",
        enrollDate: "2025-07-05",
        progress: 60,
        status: "in-progress",
        certificate: false,
        hours: 4,
        instructor: "Pedro Ramírez"
      },
      {
        id: 7,
        training: "Ética Empresarial",
        enrollDate: "2025-04-15",
        progress: 100,
        status: "completed",
        certificate: true,
        hours: 4,
        instructor: "Sofía Martín"
      },
      {
        id: 8,
        training: "Trabajo en Equipo",
        enrollDate: "2025-03-10",
        progress: 100,
        status: "completed",
        certificate: true,
        hours: 6,
        instructor: "Luis Fernández"
      }
    ];

    let filteredParticipations = [...participations];
    let currentPage = 1;
    const itemsPerPage = 5;

    // Cargar datos al inicializar
    document.addEventListener('DOMContentLoaded', function() {
      loadParticipations();
      updateStats();
      
      // Animaciones de entrada
      const elements = document.querySelectorAll('.fade-in');
      elements.forEach((el, index) => {
        setTimeout(() => {
          el.style.opacity = '1';
          el.style.transform = 'translateY(0)';
        }, index * 200);
      });
    });

    function loadParticipations(page = 1) {
      const tableBody = document.querySelector('#participationsTable tbody');
      const startIndex = (page - 1) * itemsPerPage;
      const endIndex = startIndex + itemsPerPage;
      const pageItems = filteredParticipations.slice(startIndex, endIndex);

      if (pageItems.length === 0) {
        tableBody.innerHTML = `
          <tr>
            <td colspan="6" class="empty-state">
              <div class="empty-icon">📚</div>
              <p>No se encontraron participaciones</p>
            </td>
          </tr>
        `;
        return;
      }

      tableBody.innerHTML = pageItems.map(participation => `
        <tr>
          <td>
            <strong>${participation.training}</strong><br>
            <small style="color: #94a3b8;">Instructor: ${participation.instructor}</small>
          </td>
          <td>${formatDate(participation.enrollDate)}</td>
          <td>
            <div class="progress-bar">
              <div class="progress-fill" style="width: ${participation.progress}%"></div>
            </div>
            <div class="progress-text">${participation.progress}% completado</div>
          </td>
          <td>
            <span class="status-badge status-${participation.status}">
              ${getStatusText(participation.status)}
            </span>
          </td>
          <td>
            ${participation.certificate ? 
              '<button class="action-btn certificate" onclick="downloadCertificate(' + participation.id + ')">📄 Descargar</button>' : 
              '<span style="color: #64748b;">No disponible</span>'
            }
          </td>
          <td>
            <button class="action-btn" onclick="viewDetails(${participation.id})">👁️ Ver</button>
            ${participation.status === 'in-progress' ? 
              '<button class="action-btn" onclick="continueTraining(' + participation.id + ')">▶️ Continuar</button>' : 
              ''
            }
          </td>
        </tr>
      `).join('');

      updatePagination();
    }

    function updateStats() {
      const completed = participations.filter(p => p.status === 'completed').length;
      const inProgress = participations.filter(p => p.status === 'in-progress').length;
      const certificates = participations.filter(p => p.certificate).length;
      const totalHours = participations.reduce((sum, p) => sum + p.hours, 0);

      document.getElementById('totalEnrollments').textContent = participations.length;
      document.getElementById('completedTrainings').textContent = completed;
      document.getElementById('inProgressTrainings').textContent = inProgress;
      document.getElementById('certificatesEarned').textContent = certificates;
      document.getElementById('totalHours').textContent = totalHours + 'h';
    }

    function updatePagination() {
      const totalPages = Math.ceil(filteredParticipations.length / itemsPerPage);
      const paginationEl = document.getElementById('pagination');
      
      if (totalPages <= 1) {
        paginationEl.innerHTML = '';
        return;
      }

      let paginationHTML = `
        <button class="pagination-btn" onclick="changePage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''}>
          ← Anterior
        </button>
      `;

      for (let i = 1; i <= totalPages; i++) {
        paginationHTML += `
          <button class="pagination-btn ${i === currentPage ? 'active' : ''}" onclick="changePage(${i})">
            ${i}
          </button>
        `;
      }

      paginationHTML += `
        <button class="pagination-btn" onclick="changePage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''}>
          Siguiente →
        </button>
      `;

      paginationEl.innerHTML = paginationHTML;
    }

    function changePage(page) {
      const totalPages = Math.ceil(filteredParticipations.length / itemsPerPage);
      if (page < 1 || page > totalPages) return;
      
      currentPage = page;
      loadParticipations(currentPage);
    }

    function applyFilters() {
      const statusFilter = document.getElementById('statusFilter').value;
      const trainingFilter = document.getElementById('trainingFilter').value.toLowerCase();
      const dateFilter = document.getElementById('dateFilter').value;

      filteredParticipations = participations.filter(participation => {
        const matchesStatus = statusFilter === 'all' || participation.status === statusFilter;
        const matchesTraining = !trainingFilter || participation.training.toLowerCase().includes(trainingFilter);
        const matchesDate = !dateFilter || participation.enrollDate === dateFilter;

        return matchesStatus && matchesTraining && matchesDate;
      });

      currentPage = 1;
      loadParticipations(currentPage);
    }

    function getStatusText(status) {
      const statusMap = {
        'completed': '✅ Completado',
        'in-progress': '🔄 En Progreso',
        'pending': '⏳ Pendiente',
        'cancelled': '❌ Cancelado'
      };
      return statusMap[status] || status;
    }

    function formatDate(dateString) {
      const date = new Date(dateString);
      return date.toLocaleDateString('es-ES', {
        year: 'numeric',
        month: 'short',
        day: 'numeric'
      });
    }

    function downloadCertificate(id) {
      const participation = participations.find(p => p.id === id);
      alert(`📄 Descargando certificado de "${participation.training}"\n\n✅ El certificado se descargará en formato PDF.`);
    }

    function viewDetails(id) {
      const participation = participations.find(p => p.id === id);
      alert(`📚 Detalles de "${participation.training}"\n\n` +
            `📅 Fecha de inscripción: ${formatDate(participation.enrollDate)}\n` +
            `📊 Progreso: ${participation.progress}%\n` +
            `👤 Instructor: ${participation.instructor}\n` +
            `⏰ Horas: ${participation.hours}h\n` +
            `🏆 Estado: ${getStatusText(participation.status)}`);
    }

    function continueTraining(id) {
      const participation = participations.find(p => p.id === id);
      alert(`▶️ Continuando con "${participation.training}"\n\n` +
            `📊 Progreso actual: ${participation.progress}%\n` +
            `🎯 Redirigiendo al módulo de entrenamiento...`);
    }

    // Búsqueda en tiempo real
    document.getElementById('trainingFilter').addEventListener('input', function() {
      clearTimeout(this.searchTimeout);
      this.searchTimeout = setTimeout(() => {
        applyFilters();
      }, 300);
    });

    // Filtro de estado en tiempo real
    document.getElementById('statusFilter').addEventListener('change', applyFilters);
    document.getElementById('dateFilter').addEventListener('change', applyFilters);

    // Inicializar elementos con opacidad 0 para animaciones
    document.querySelectorAll('.fade-in').forEach(el => {
      el.style.opacity = '0';
      el.style.transform = 'translateY(30px)';
      el.style.transition = 'all 0.6s ease-out';
    });
  </script>
</body>
</html>